"use strict";define(["jquery","underscore","webuploader","jquery.jplayer","bootstrap"],function(n,t,i){var r={defaultoptions:{direct:!1,global:!1,dest_dir:"",callback:null,type:"image",multiple:!0,uploader:{}},uploader:{},show:function(n,t){return this.init(n,t)},init:function(t,i){var r=this;return r.options=n.extend({},r.defaultoptions,i),r.options.callback=t,this.options.global=this.options.global?"global":"",document.cookie="__fileupload_type="+escape(this.options.type),document.cookie="__fileupload_dest_dir="+escape(this.options.dest_dir),document.cookie="__fileupload_global="+escape(this.options.global),n("#modal-webuploader").remove(),0==n("#modal-webuploader").length&&n(document.body).append(r.buildHtml().mainDialog),r.modalobj=n("#modal-webuploader"),r.modalobj.modal("show"),r.modalobj.on("shown.bs.modal",function(){n(this).data("init")||("image"==r.options.type&&(r.initRemote(),r.initLocal()),"audio"==r.options.type&&r.initLocalAudio(),r["init"+r.options.type.substring(0,1).toUpperCase()+r.options.type.substring(1)+"Uploader"]())}),r.modalobj},initRemote:function(){var t=this;t.modalobj.find("#li_network").removeClass("hide");t.modalobj.find(".modal-body").append(t.buildHtml().remoteDialog);t.modalobj.find(".btn-primary").click(function(){var i=t.modalobj.find("#networkurl").val();i.length>0&&n.getJSON("./index.php?c=utility&a=file&do=fetch",{url:i},function(n){n.message&&alert(n.message);n&&(t.finish([n]),n={})})})},initLocal:function(){var n=this;n.modalobj.find("#li_history_image").removeClass("hide");n.modalobj.find("#history_image")[0]||n.modalobj.find(".modal-body").append(this.buildHtml().localDialog);n.modalobj.find("#history_image");n.localPage(1)},localPage:function(){},selectImage:function(){},initLocalAudio:function(){var n=this;n.modalobj.find("#li_history_audio").removeClass("hide");n.modalobj.find("#history_audio")[0]||n.modalobj.find(".modal-body").append(this.buildHtml().localAudioDialog);n.modalobj.find("#li_history_audio");n.localAudioPage(1)},localAudioPage:function(i){var u=this,r=u.modalobj.find("#history_audio");return n.getJSON("./index.php?c=utility&a=file&do=local&type=audio&pagesize=5",{page:i},function(i){i=i.message;r.find(".history-content").html('<i class="fa fa-spinner fa-pulse"><\/i>');t.isEmpty(i.items)||(r.data("attachment",i.items),r.find(".history-content").empty(),r.find(".history-content").html(t.template(u.buildHtml().localAudioDialogLi)(i)),r.find("#image-list-pager").html(i.page),r.find(".pagination a").click(function(){u.localAudioPage(n(this).attr("page"))}),r.find(".js-btn-select").click(function(t){n(t.target).toggleClass("btn-primary");u.options.multiple||u.modalobj.find("#history_audio").find(".modal-footer .btn-primary").trigger("click")}),u.playAudio())}),r.find(".modal-footer .btn-primary").unbind("click").click(function(){var t=[];r.find(".history-content .btn-primary").each(function(){t.push(u.modalobj.find("#history_audio").data("attachment")[n(this).attr("attachid")]);n(this).removeClass("btn-primary")});u.finish(t)}),!1},playAudio:function(){var t=this,i=t.modalobj.find("#history_audio");n(".audio-player-play").click(function(){var r=n(this).attr("attach"),t;r&&(n("#player")[0]?t=n("#player"):(t=n('<div id="player"><\/div>'),n(document.body).append(t)),t.data("control",n(this)),t.jPlayer({playing:function(){n(this).data("control").find("p").removeClass("fa-play").addClass("fa-stop")},pause:function(){n(this).data("control").find("p").removeClass("fa-stop").addClass("fa-play")},swfPath:"resource/components/jplayer",supplied:"mp3,wma,wav,amr",solution:"html, flash"}),t.jPlayer("setMedia",{mp3:n(this).attr("attach")}).jPlayer("play"),n(this).find("p").hasClass("fa-stop")?t.jPlayer("stop"):(i.find(".fa-stop").removeClass("fa-stop").addClass("fa-play"),t.jPlayer("setMedia",{mp3:n(this).attr("attach")}).jPlayer("play")))})},initImageUploader:function(){function w(t){var i=n('<li id="'+t.id+'"><p class="title">'+t.name+'<\/p><p class="imgWrap"><\/p><\/li>'),e=n('<div class="file-panel"><span class="cancel">删除<\/span><\/div>').appendTo(i),s=i.find("p.progress span"),u=i.find("p.imgWrap"),c=n('<p class="error"><\/p>'),o=function(n){switch(n){case"exceed_size":text="文件大小超出";break;case"interrupt":text="上传暂停";break;default:text="上传失败，请重试"}c.text(text).appendTo(i)};"invalid"===t.getStatus()?o(t.statusText):(u.text("预览中"),r.makeThumb(t,function(t,i){if(t)return void u.text("不能预览");var r=n('<img src="'+i+'">');u.empty().append(r)},thumbnailWidth,thumbnailHeight),percentages[t.id]=[t.size,0],t.rotation=0);t.on("statuschange",function(n,r){"progress"===r?s.hide().width(0):"queued"===r&&(i.off("mouseenter mouseleave"),e.remove());"error"===n||"invalid"===n?(o(t.statusText),percentages[t.id][1]=1):"interrupt"===n?o("interrupt"):"queued"===n?percentages[t.id][1]=0:"progress"===n&&(c.remove(),s.css("display","block"));i.removeClass("state-"+r).addClass("state-"+n)});i.on("mouseenter",function(){e.stop().animate({height:30})});i.on("mouseleave",function(){e.stop().animate({height:0})});e.on("click","span",function(){var i,f=n(this).index();switch(f){case 0:return void r.removeFile(t);case 1:t.rotation+=90;break;case 2:t.rotation-=90}supportTransition?(i="rotate("+t.rotation+"deg)",u.css({"-webkit-transform":i,"-mos-transform":i,"-o-transform":i,transform:i})):u.css("filter","progid:DXImageTransform.Microsoft.BasicImage(rotation="+~~(t.rotation/90%4+4)%4+")")});f.options.multiple&&h.find(".fileinput-button").show();i.insertBefore(h.find(".fileinput-button"))}function y(t){var i=n("#"+t.id);delete percentages[t.id];e();i.off().find(".file-panel").off().end().remove()}function e(){var t,r=0,i=0,u=c.children();n.each(percentages,function(n,t){i+=t[0];r+=t[0]*t[1]});t=i?r/i:0;u.eq(0).text(Math.round(100*t)+"%");u.eq(1).css("width",Math.round(100*t)+"%");p()}function p(){var n,t="";"ready"===state?t="选中"+fileCount+"张图片，共"+i.formatSize(fileSize)+"。":"confirm"===state?(n=r.getStats(),n.uploadFailNum&&(t="已上传"+n.successNum+"张图片,"+n.uploadFailNum+'张图片上传失败，<a class="retry" href="#">重新上传<\/a>失败图片或<a class="ignore" href="#">忽略<\/a>')):(n=r.getStats(),t="共"+fileCount+"张（"+i.formatSize(fileSize)+"），已上传"+n.successNum+"张",n.uploadFailNum&&(t+="，失败"+n.uploadFailNum+"张"));a.html(t)}function u(n){var i;if(n!==state){switch(t.removeClass("state-"+state),t.addClass("state-"+n),state=n,state){case"pedding":v.removeClass("element-invisible");h.hide();r.refresh();break;case"ready":v.addClass("element-invisible");h.show();r.refresh();break;case"uploading":c.show();t.text("暂停上传");break;case"paused":c.hide();t.text("确定使用");break;case"confirm":if(c.hide(),t.text("确定使用").addClass("disabled"),i=r.getStats(),i.successNum&&!i.uploadFailNum)return void u("finish");break;case"finish":if(t.removeClass("disabled"),i=r.getStats(),i.successNum){if(r.uploadedFiles.length>0)return f.finish(r.uploadedFiles),void r.resetUploader()}else state="done",location.reload()}p()}}var f=this,s;f.modalobj.find("#li_upload a").html("上传图片");f.modalobj.find(".modal-body").append(this.buildHtml().uploaderDialog);var o=n("#uploader"),h=n('<ul class="filelist"><li class="fileinput-button js-add-image" id="filePicker2" style="display:none;"> <a href="javascript:;" class="fileinput-button-icon">+<\/a><\/li><\/ul>').appendTo(o.find(".queueList")),l=o.find(".statusBar"),a=l.find(".info"),t=o.find(".uploadBtn"),v=o.find(".placeholder"),c=l.find(".progress").hide();o.find(".btn-primary");fileCount=0;fileSize=0;ratio=window.devicePixelRatio||1;thumbnailWidth=110*ratio;thumbnailHeight=110*ratio;state="pedding";percentages={};supportTransition=function(){var n=document.createElement("p").style,t="transition"in n||"WebkitTransition"in n||"MozTransition"in n||"msTransition"in n||"OTransition"in n;return n=null,t}();r;s={pick:{id:"#filePicker",label:"点击选择图片",multiple:!0},dnd:"#dndArea",paste:"#uploader",swf:"./resource/componets/webuploader/Uploader.swf",server:"/admin/poster/upload",chunked:!1,compress:!1,accept:{title:"Images",extensions:"gif,jpg,jpeg,bmp,png",mimeTypes:"image/*"},fileNumLimit:30,fileSizeLimit:4194304,fileSingleSizeLimit:125829120,auto:!1};s=n.extend({},s,f.options.uploader);s.pick.multiple=f.options.multiple;r=i.create(s);r.uploadedFiles=[];r.addButton({id:"#filePicker2",label:"+",multiple:f.options.multiple});accept=0;r.resetUploader=function(){fileCount=0;fileSize=0;accept=0;r.uploadedFiles=[];n.each(r.getFiles(),function(n,t){y(t)});r.refresh();r.reset();t.removeClass("disabled");u("pedding")};r.onUploadProgress=function(t,i){var r=n("#"+t.id),u=r.find(".progress span");u.css("width",100*i+"%");percentages[t.id][1]=i;fileid=t.id;e()};r.onFileQueued=function(n){fileCount++;fileSize+=n.size;1===fileCount&&(v.addClass("element-invisible"),l.show());w(n);u("ready");e()};r.onFileDequeued=function(n){fileCount--;fileSize-=n.size;fileCount||u("pedding");y(n);e()};r.on("all",function(n){switch(n){case"uploadFinished":u("confirm");break;case"startUpload":u("uploading");break;case"stopUpload":u("paused")}});r.on("uploadSuccess",function(t,i){return i.message?(alert(i.message),void r.resetUploader()):void(i.attachment&&(accept++,r.uploadedFiles.push(i),n("#"+t.id).append('<span class="success" style="line-height: 50px;">'+i.width+"x"+i.height+"<\/span>"),n(".accept").text("成功上传 "+accept+" 张图片")))});r.onError=function(n){return"Q_EXCEED_SIZE_LIMIT"==n?void alert("错误信息: 图片大于 1M 无法上传."):"F_DUPLICATE"==n?void alert("错误信息: 不能重复上传图片."):void alert("Eroor: "+n)};t.on("click",function(){return n(this).hasClass("disabled")?!1:void("ready"===state?r.upload():"paused"===state?r.upload():"uploading"===state&&r.stop())});a.on("click",".retry",function(){r.retry()});a.on("click",".ignore",function(){});t.addClass("state-"+state);e()},initAudioUploader:function(){function w(t){var u=n('<li id="'+t.id+'"><p class="title" style="top:40px;">'+t.name+'<\/p><p class="imgWrap" style="top:30px;"><\/p><\/li>'),f=n('<div class="file-panel"><span class="cancel">删除<\/span><\/div>').appendTo(u),l=u.find("p.progress span"),o=u.find("p.imgWrap"),c=n('<p class="error"><\/p>'),s=function(n){switch(n){case"exceed_size":text="文件大小超出";break;case"interrupt":text="上传暂停";break;default:text="上传失败，请重试"}c.text(text).appendTo(u)};"invalid"===t.getStatus()?s(t.statusText):(o.text(i.formatSize(t.size)+" kb"),percentages[t.id]=[t.size,0],t.rotation=0);t.on("statuschange",function(n,i){"progress"===i?l.hide().width(0):"queued"===i&&(u.off("mouseenter mouseleave"),f.remove());"error"===n||"invalid"===n?(s(t.statusText),percentages[t.id][1]=1):"interrupt"===n?s("interrupt"):"queued"===n?percentages[t.id][1]=0:"progress"===n&&c.remove();u.removeClass("state-"+i).addClass("state-"+n)});u.on("mouseenter",function(){f.stop().animate({height:30})});u.on("mouseleave",function(){f.stop().animate({height:0})});f.on("click","span",function(){var i,u=n(this).index();switch(u){case 0:return void r.removeFile(t);case 1:t.rotation+=90;break;case 2:t.rotation-=90}supportTransition?(i="rotate("+t.rotation+"deg)",o.css({"-webkit-transform":i,"-mos-transform":i,"-o-transform":i,transform:i})):o.css("filter","progid:DXImageTransform.Microsoft.BasicImage(rotation="+~~(t.rotation/90%4+4)%4+")")});e.options.multiple&&h.find(".fileinput-button").show();u.insertBefore(h.find(".fileinput-button"))}function y(t){var i=n("#"+t.id);delete percentages[t.id];o();i.off().find(".file-panel").off().end().remove()}function o(){var t,r=0,i=0,u=c.children();n.each(percentages,function(n,t){i+=t[0];r+=t[0]*t[1]});t=i?r/i:0;u.eq(0).text(Math.round(100*t)+"%");u.eq(1).css("width",Math.round(100*t)+"%");p()}function p(){var n,t="";"ready"===state?t="选中"+fileCount+"个音频，共"+i.formatSize(fileSize)+"。":"confirm"===state?(n=r.getStats(),n.uploadFailNum&&(t="已上传"+n.successNum+"个音频,"+n.uploadFailNum+'个音频上传失败，<a class="retry" href="#">重新上传<\/a>失败音频文件或<a class="ignore" href="#">忽略<\/a>')):(n=r.getStats(),t="共"+fileCount+"张（"+i.formatSize(fileSize)+"），已上传"+n.successNum+"个",n.uploadFailNum&&(t+="，失败"+n.uploadFailNum+"个"));a.html(t)}function f(n){var i;if(n!==state){switch(t.removeClass("state-"+state),t.addClass("state-"+n),state=n,state){case"pedding":v.removeClass("element-invisible");h.hide();r.refresh();break;case"ready":v.addClass("element-invisible");h.show();r.refresh();break;case"uploading":c.show();t.text("暂停上传");break;case"paused":c.show();t.text("继续上传");break;case"confirm":if(c.hide(),t.text("确定使用").addClass("disabled"),i=r.getStats(),i.successNum&&!i.uploadFailNum)return void f("finish");break;case"finish":if(t.removeClass("disabled"),i=r.getStats(),i.successNum){if(r.uploadedFiles.length>0)return e.finish(r.uploadedFiles),void r.resetUploader()}else state="done",location.reload()}p()}}var e=this,u;e.modalobj.find("#li_upload a").html("上传音频");e.modalobj.find(".modal-body").append(this.buildHtml().uploaderDialog);var s=n("#uploader"),h=n('<ul class="filelist"><li class="fileinput-button js-add-image" id="filePicker2" style="display:none;"> <a href="javascript:;" class="fileinput-button-icon">+<\/a><\/li><\/ul>').appendTo(s.find(".queueList")),l=s.find(".statusBar"),a=l.find(".info"),t=s.find(".uploadBtn"),v=s.find(".placeholder"),c=l.find(".progress").hide();s.find(".btn-primary");fileCount=0;fileSize=0;ratio=window.devicePixelRatio||1;state="pedding";percentages={};supportTransition=function(){var n=document.createElement("p").style,t="transition"in n||"WebkitTransition"in n||"MozTransition"in n||"msTransition"in n||"OTransition"in n;return n=null,t}();r;u={pick:{id:"#filePicker",label:"点击选择音频",multiple:!0},dnd:"#dndArea",paste:"#uploader",swf:"./resource/componets/webuploader/Uploader.swf",server:"./index.php?c=utility&a=file&do=upload&type=audio",chunked:!1,compress:!1,accept:{title:"Audios",extensions:"mp3,wma,wav,amr",mimeTypes:"audio/*"},fileNumLimit:30,fileSizeLimit:6291456,fileSingleSizeLimit:125829120,auto:!1};u=n.extend({},u,e.options.uploader);n("#dndArea p").html("最大支持 "+i.formatSize(u.fileSizeLimit)+" MB 以内的语音 ("+u.accept.extensions+" 格式)");u.pick.multiple=e.options.multiple;r=i.create(u);r.uploadedFiles=[];r.addButton({id:"#filePicker2",label:"+",multiple:e.options.multiple});accept=0;r.resetUploader=function(){fileCount=0;fileSize=0;accept=0;r.uploadedFiles=[];n.each(r.getFiles(),function(n,t){y(t)});r.refresh();r.reset();t.removeClass("disabled");f("pedding")};r.onUploadProgress=function(t,i){var r=n("#"+t.id),u=r.find(".progress span");u.css("width",100*i+"%");percentages[t.id][1]=i;fileid=t.id;o()};r.onFileQueued=function(n){fileCount++;fileSize+=n.size;1===fileCount&&(v.addClass("element-invisible"),l.show());w(n);f("ready");o()};r.onFileDequeued=function(n){fileCount--;fileSize-=n.size;fileCount||f("pedding");y(n);o()};r.on("all",function(n){switch(n){case"uploadFinished":f("confirm");break;case"startUpload":f("uploading");break;case"stopUpload":f("paused")}});r.on("uploadSuccess",function(t,i){return i.error?(alert(i.message),r.resetUploader(),!1):void(i.attachment&&(accept++,r.uploadedFiles.push(i),n("#"+t.id).append('<span class="success" style="line-height: 50px;">'+i.width+"x"+i.height+"<\/span>"),n(".accept").text("成功上传 "+accept+" 个音频")))});r.onError=function(n){return"Q_EXCEED_SIZE_LIMIT"==n?void alert("错误信息: 音频大于 "+i.formatSize(u.fileSizeLimit)+" 无法上传."):"F_DUPLICATE"==n?void alert("错误信息: 不能重复上传音频."):void alert("Eroor: "+n)};t.on("click",function(){return n(this).hasClass("disabled")?!1:void("ready"===state?r.upload():"paused"===state?r.upload():"uploading"===state&&r.stop())});a.on("click",".retry",function(){r.retry()});a.on("click",".ignore",function(){});t.addClass("state-"+state);o()},finish:function(t){var i=this;n.isFunction(i.options.callback)&&(0==i.options.multiple?i.options.callback(t[0]):i.options.callback(t),i.modalobj.modal("hide"))},buildHtml:function(){var n={};return n.mainDialog='<div id="modal-webuploader" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">\n\t<div class="modal-dialog" style="width:660px;">\n\t\t<div class="modal-content">\n\t\t\t<div class="modal-header">\n\t\t\t\t<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×<\/button>\n\t\t\t\t<ul class="nav nav-pills" role="tablist">\n\t\t\t\t\t<li id="li_upload" class="active" role="presentation"><a href="#upload" aria-controls="upload" role="tab" data-toggle="tab" onclick="$(\'#select\').hide();">上传<\/a><\/li>\n\t\t\t\t\t<li id="li_network" class="hide" role="presentation"><a href="#network" aria-controls="network" role="tab" data-toggle="tab" onclick="$(\'#select\').hide();">提取网络图片<\/a><\/li>\n\t\t\t\t\t<li id="li_history_audio" class="hide" role="presentation"><a href="#history_audio" aria-controls="history_audio" role="tab" data-toggle="tab" onclick="$(\'#select\').hide();">浏览音频<\/a><\/li>\n\t\t\t\t<\/ul>\n\t\t\t<\/div>\n\t\t\t\t<div id="select" style="display: none;margin:10px 0 -10px 15px; padding-left:7px;">\t\t\t\t\t<div id="select-year" style="margin-bottom:10px;">\t\t\t\t\t\t<div class="btn-group">\t\t\t\t\t\t\t<a href="javascript:;" data-id="0" data-type="year" class="btn btn-default btn-info btn-select">不限<\/a>\t\t\t\t\t\t\t<a href="javascript:;" data-id="2015" data-type="year" class="btn btn-default btn-select">2015年<\/a>\t\t\t\t\t\t\t<a href="javascript:;" data-id="2014" data-type="year" class="btn btn-default btn-select">2014年<\/a>\t\t\t\t\t\t\t<a href="javascript:;" data-id="2013" data-type="year" class="btn btn-default btn-select">2013年<\/a>\t\t\t\t\t\t<\/div>\t\t\t\t\t<\/div>\t\t\t\t\t<div id="select-month">\t\t\t\t\t\t<div class="btn-group">\t\t\t\t\t\t\t<a href="javascript:;" data-id="0" data-type="month" class="btn btn-default btn-info btn-select">不限<\/a>\t\t\t\t\t\t\t<a href="javascript:;" data-id="1" data-type="month" class="btn btn-default btn-select">1<\/a>\t\t\t\t\t\t\t<a href="javascript:;" data-id="2" data-type="month" class="btn btn-default btn-select">2<\/a>\t\t\t\t\t\t\t<a href="javascript:;" data-id="3" data-type="month" class="btn btn-default btn-select">3<\/a>\t\t\t\t\t\t\t<a href="javascript:;" data-id="4" data-type="month" class="btn btn-default btn-select">4<\/a>\t\t\t\t\t\t\t<a href="javascript:;" data-id="5" data-type="month" class="btn btn-default btn-select">5<\/a>\t\t\t\t\t\t\t<a href="javascript:;" data-id="6" data-type="month" class="btn btn-default btn-select">6<\/a>\t\t\t\t\t\t\t<a href="javascript:;" data-id="7" data-type="month" class="btn btn-default btn-select">7<\/a>\t\t\t\t\t\t\t<a href="javascript:;" data-id="8" data-type="month" class="btn btn-default btn-select">8<\/a>\t\t\t\t\t\t\t<a href="javascript:;" data-id="9" data-type="month" class="btn btn-default btn-select">9<\/a>\t\t\t\t\t\t\t<a href="javascript:;" data-id="10" data-type="month" class="btn btn-default btn-select">10<\/a>\t\t\t\t\t\t\t<a href="javascript:;" data-id="11" data-type="month" class="btn btn-default btn-select">11<\/a>\t\t\t\t\t\t\t<a href="javascript:;" data-id="12" data-type="month" class="btn btn-default btn-select">12<\/a>\t\t\t\t\t\t<\/div>\t\t\t\t\t<\/div>\t\t\t\t<\/div>\t\t\t<div class="modal-body tab-content"><\/div>\n\t\t<\/div>\n\t<\/div>\n<\/div>',n.remoteDialog='<div role="tabpanel" class="tab-pane network" id="network">\n\t<div style="margin-top: 10px;">\n\t\t<form>\n\t\t\t<div class="form-group">\n\t\t\t\t<input type="url" class="form-control" id="networkurl" placeholder="请输入网络图片地址">\n\t\t\t\t<input type="hidden" name="network_attachment" value="" >\n\t\t\t\t<div id="network-img" class="network-img" style="background-image:url(\'{php echo tomedia(\'images/global/nopic.jpg\');}\')">\n\t\t\t\t\t<span class="network-img-sizeinfo" id="network-img-sizeinfo"><\/span>\n\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t<\/form>\n\t<\/div>\n\t<div class="modal-footer">\n\t\t<button type="button" class="btn btn-primary">确认<\/button>\n\t\t<button type="button" class="btn btn-default" data-dismiss="modal">取消<\/button>\n\t<\/div>\n<\/div>',n.localDialog='<div role="tabpanel" class="tab-pane history" id="history_image">\n\t<div class="history-content" style="height:310px"><\/div>\n\t<div class="modal-footer">\n\t\t<div style="float: left;">\n\t\t\t<nav id="image-list-pager">\n\t\t\t\t<ul class="pager" style="margin: 0;"><\/ul>\n\t\t\t<\/nav>\n\t\t<\/div>\n\t\t<div style="float: right;">\n\t\t<button '+(this.options.multiple?"":'style="display:none;"')+' type="button" class="btn btn-primary">确认<\/button>\n'+(this.options.multiple?'<button type="button" class="btn btn-default" data-dismiss="modal">取消<\/button>\n':"")+"\t\t<\/div>\n\t<\/div>\n<\/div>",n.uploaderDialog='<div role="tabpanel" class="tab-pane upload active" id="upload">\n\t<div id="uploader" class="uploader">\n\t\t<div class="queueList">\n\t\t\t<div id="dndArea" class="placeholder">\n\t\t\t\t<div id="filePicker">xx<\/div>\n'+(this.options.multiple?'<p id="">或将照片拖到这里，单次最多可选30张<\/p>\n':'<p id="">或将照片拖到这里<\/p>\n')+'\t\t\t<\/div>\n\t\t<\/div>\n\t\t<div class="statusBar">\n\t\t\t<div class="infowrap">\n\t\t\t\t<div class="progress">\n\t\t\t\t\t<span class="text">0%<\/span>\n\t\t\t\t\t<span class="percentage"><\/span>\n\t\t\t\t<\/div>\n\t\t\t\t<div class="info"><\/div>\n\t\t\t\t<div class="accept"><\/div>\n\t\t\t<\/div>\n\t\t\t<div class="btns">\n\t\t\t\t<div class="uploadBtn btn btn-primary" style="margin-top: 4px;">确定使用<\/div>\n\t\t\t\t<div class="modal-button-upload" style="float: right; margin-left: 5px;">\n\t\t\t\t\t<button type="button" class="btn btn-default" data-dismiss="modal">取消<\/button>\n\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t<\/div>\n\t<\/div>\n<\/div>',n.localDialogLi='<ul class="img-list clearfix">\n<%var items = _.sortBy(items, function(item) {return -item.id;});%><%_.each(items, function(item) {%> \n<li class="img-item" attachid="<%=item.id%>" title="<%=item.filename%>">\n\t<div class="img-container" style="background-image: url(\'<%=item.url%>\');">\n\t\t<div class="select-status"><span><\/span><\/div>\n\t<\/div>\n\t<div class="btnClose" data-id="<%=item.id%>"><a href=""><i class="fa fa-times"><\/i><\/a><\/div>\n<\/li>\n<%});%>\n<\/ul>',n.localAudioDialog='<div role="tabpanel" class="tab-pane history" id="history_audio">\n\t<div style="height:310px">\n\t\t<table class="table table-hover">\n\t\t<thead class="navbar-inner">\n\t\t\t<tr>\n\t\t\t\t<th>标题<\/th>\n\t\t\t\t<th style="width:20%;">创建时间<\/th>\n\t\t\t\t<th style="width:30%;">\n\t\t\t\t\t<div class="input-group input-group-sm">\n\t\t\t\t\t\t<input type="text" class="form-control">\n\t\t\t\t\t\t<span class="input-group-btn">\n\t\t\t\t\t\t\t<button class="btn btn-default" type="button"><i class="fa fa-search" style="font-size:12px; margin-top:0;"><\/i><\/button>\n\t\t\t\t\t\t<\/span>\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/th>\n\t\t\t<\/tr>\n\t\t<\/thead>\n\t\t<tbody class="history-content">\n\t\t<\/tbody>\n\t<\/table><\/div>\n\t<div class="modal-footer">\n\t\t<div style="float: left;">\n\t\t\t<nav id="image-list-pager">\n\t\t\t\t<ul class="pager" style="margin: 0;"><\/ul>\n\t\t\t<\/nav>\n\t\t<\/div>\n\t\t<div style="float: right;">\n\t\t<button '+(this.options.multiple?"":'style="display:none;"')+' type="button" class="btn btn-primary">确认<\/button>\n'+(this.options.multiple?'<button type="button" class="btn btn-default" data-dismiss="modal">取消<\/button>\n':"")+"\t\t<\/div>\n\t<\/div>\n<\/div>",n.localAudioDialogLi='<%var items = _.sortBy(items, function(item) {return -item.id;});%><%_.each(items, function(item) {%> \n<tr>\n\t<td><a href="#" title="<%=item.filename%>"><%=item.filename%><\/a><\/td>\n\t<td class="text-right"><%=item.createtime%><\/td>\n\t<td class="text-right">\n\t\t<span class="input-group-btn">\n\t\t\t<button class="btn btn-default audio-player-play" type="button" attach="<%=item.url%>"><p style="margin:0px;" class="fa fa-play"><\/p><\/button>\n\t\t\t<button attachid="<%=item.id%>" class="btn btn-default js-btn-select">选取<\/button>\n\t\t<\/span>\n\t<\/td>\n<\/tr>\n<%});%>\n',n}};return r});